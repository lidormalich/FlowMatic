# FlowMatic - ×ª×›× ×•×Ÿ ××¢×¨×›×ª × ×™×”×•×œ ×ª×•×¨×™×

## ğŸ“‹ ×¡×§×™×¨×” ×›×œ×œ×™×ª

××¢×¨×›×ª SaaS ×œ× ×™×”×•×œ ×ª×•×¨×™× ×©×××¤×©×¨×ª ×œ×‘×¢×œ×™ ×¢×¡×§×™× ×œ× ×”×œ ×™×•××Ÿ ×ª×•×¨×™× ×•×œ××¤×©×¨ ×œ×œ×§×•×—×•×ª ×œ×§×‘×•×¢ ×ª×•×¨×™× ×“×¨×š ×§×™×©×•×¨ ×¦×™×‘×•×¨×™.

---

## ğŸ‘¥ ×¨××•×ª ××©×ª××©×™×

### 1. Client (×œ×§×•×—)

- ×™×›×•×œ ×œ×§×‘×•×¢ ×ª×•×¨×™× ×“×¨×š ×§×™×©×•×¨ ×¦×™×‘×•×¨×™
- ×œ× ×¦×¨×™×š ×œ×”×ª×—×‘×¨ ×œ××¢×¨×›×ª
- ××§×‘×œ ××™×©×•×¨ SMS (××•×¤×¦×™×•× ×œ×™)

### 2. Business Owner (×‘×¢×œ ×¢×¡×§)

- ×™×© ×œ×• username ×™×™×—×•×“×™ (URL ×¦×™×‘×•×¨×™: `/USER/:username`)
- ×× ×”×œ ××ª ×¡×•×’×™ ×”×ª×•×¨×™× ×©×œ×•
- ×¨×•××” ×•×× ×”×œ ××ª ×›×œ ×”×ª×•×¨×™× ×©×œ×•
- ×™×›×•×œ ×œ×‘×˜×œ/×œ××©×¨ ×ª×•×¨×™×
- ××§×‘×œ ×”×ª×¨××•×ª SMS ×¢×œ ×ª×•×¨×™× ×—×“×©×™×
- ×™×© ×œ×• ××¢×¨×›×ª ×§×¨×“×™×˜×™× (×›×œ ×ª×•×¨ ×¢×•×œ×” ×§×¨×“×™×˜)
- ×™×›×•×œ ×œ×”×’×“×™×¨ ×©×¢×•×ª ×¢×‘×•×“×”
- ×™×›×•×œ ×œ×”×’×“×™×¨ ×ª×™××•×¨ ×¢×¡×§
- ×™×›×•×œ ×œ×”×¢×œ×•×ª ×ª××•× ×” ×œ×¢×¡×§
- ×™×›×•×œ ×œ×§×©×¨ ××ª ×—×©×‘×•×Ÿ ×’×•×’×œ ×©×œ×• ×•×œ×‘×—×•×¨ ××ª ×”×™×•××Ÿ ×©×™×ª×¢×“×›×Ÿ ×œ×ª×•×¨×™×

### 3. Admin (×× ×”×œ ××¢×¨×›×ª)

- ×¨×•××” ××ª ×›×œ ×”××©×ª××©×™×
- ×™×›×•×œ ×œ×”×•×¡×™×£/×œ×”×¡×™×¨/×œ×”×©×¢×•×ª ××©×ª××©×™×
- ×™×›×•×œ ×œ×”×•×¡×™×£/×œ×”×¡×™×¨ ×§×¨×“×™×˜×™× ×œ××©×ª××©×™×
- ×¨×•××” ×¡×˜×˜×™×¡×˜×™×§×•×ª ×›×œ×œ×™×•×ª
- ×’×™×©×” ×œ×›×œ ×”×ª×›×•× ×•×ª

---

## ğŸ¯ ×ª×›×•× ×•×ª ××¨×›×–×™×•×ª

### ğŸ“± ×“×£ ×¦×™×‘×•×¨×™ ×œ×§×‘×™×¢×ª ×ª×•×¨×™× (`/:username`)

**××” ×¦×¨×™×š ×œ×”×™×•×ª ×‘×“×£:**

- [ ] ×›×•×ª×¨×ª ×¢× ×©× ×”×¢×¡×§ ×•×ª×™××•×¨
- [ ] ×¤×¨×˜×™ ×§×©×¨ (×˜×œ×¤×•×Ÿ, ×›×ª×•×‘×ª)
- [ ] ×‘×—×™×¨×ª ×¡×•×’ ×ª×•×¨ (grid ×©×œ ×›×¨×˜×™×¡×™×)
  - ×©× ×”×©×™×¨×•×ª
  - ××©×š ×–××Ÿ
  - ××—×™×¨
  - ×ª×™××•×¨
- [ ] ×‘×—×™×¨×ª ×ª××¨×™×š (calendar picker)
  - ×—×¡×™××ª ×ª××¨×™×›×™× ×¢×‘×¨
  - ×—×¡×™××ª ×™××™× ×©×œ× ×¢×•×‘×“×™×
  - ×”×¦×’×ª ×ª××¨×™×š ×¢×‘×¨×™
- [ ] ×‘×—×™×¨×ª ×©×¢×” ××ª×•×š ×©×¢×•×ª ×¤× ×•×™×•×ª
  - ×—×™×©×•×‘ ××•×˜×•××˜×™ ×œ×¤×™ ××©×š ×”×ª×•×¨
  - ×”×¦×’×ª ×¨×§ ×©×¢×•×ª ×¤× ×•×™×•×ª
- [ ] ×˜×•×¤×¡ ×¤×¨×˜×™ ×œ×§×•×—
  - ×©× ××œ×
  - ×˜×œ×¤×•×Ÿ
  - ××™××™×™×œ (××•×¤×¦×™×•× ×œ×™)
  - ×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)
- [ ] ×›×¤×ª×•×¨ ××™×©×•×¨ ×•×©××™×¨×”
- [ ] ×”×•×“×¢×ª ×”×¦×œ×—×” ×¢× ×¤×¨×˜×™ ×”×ª×•×¨
- [ ] ××¤×©×¨×•×ª ×œ×”×•×¡×™×£ ×œ×™×•××Ÿ (Google Calendar, iCal)

### ğŸ¢ ×“×©×‘×•×¨×“ ×‘×¢×œ ×¢×¡×§

**×ª×›×•× ×•×ª:**

- [ ] ×¡×˜×˜×™×¡×˜×™×§×•×ª
  - ××¡×¤×¨ ×ª×•×¨×™× ×”×—×•×“×©
  - ××¡×¤×¨ ×ª×•×¨×™× ×”×™×•×
  - ×§×¨×“×™×˜×™× × ×•×ª×¨×™×
  - ×”×›× ×¡×•×ª ×”×—×•×“×© (×× ×™×© ××—×™×¨×™×)
- [ ] ×ª×•×¨×™× ×§×¨×•×‘×™× (×”×™×•× + ××—×¨)
- [ ] ×§×™×©×•×¨×™× ××”×™×¨×™×
  - ×”×§×™×©×•×¨ ×”×¦×™×‘×•×¨×™ ×©×œ×™
  - × ×™×”×•×œ ×¡×•×’×™ ×ª×•×¨×™×
  - ×™×•××Ÿ ×ª×•×¨×™×
  - ×”×’×“×¨×•×ª

### ğŸ“… × ×™×”×•×œ ×ª×•×¨×™× (Events)

**×ª×›×•× ×•×ª:**

- [ ] ×ª×¦×•×’×ª ×œ×•×— ×©× ×” (Calendar View)
  - ×ª×¦×•×’×ª ×—×•×“×©/×©×‘×•×¢/×™×•×
  - ×¦×‘×¢×™× ×œ×¤×™ ×¡×•×’ ×ª×•×¨
  - RTL support
- [ ] ×¨×©×™××ª ×ª×•×¨×™× (List View)
  - ×¤×™×œ×˜×¨ ×œ×¤×™ ×ª××¨×™×š
  - ×¤×™×œ×˜×¨ ×œ×¤×™ ×¡×˜×˜×•×¡
  - ×¤×™×œ×˜×¨ ×œ×¤×™ ×¡×•×’ ×ª×•×¨
  - ×—×™×¤×•×© ×œ×¤×™ ×©× ×œ×§×•×—/×˜×œ×¤×•×Ÿ
- [ ] ×¤×¢×•×œ×•×ª ×¢×œ ×ª×•×¨
  - ×¦×¤×™×™×” ×‘×¤×¨×˜×™×
  - ×¢×¨×™×›×” (×©×¢×”, ×ª××¨×™×š)
  - ×‘×™×˜×•×œ
  - ×¡×™××•×Ÿ ×›×”×’×™×¢ / ×œ× ×”×’×™×¢
  - ×©×œ×™×—×ª SMS ×ª×–×›×•×¨×ª
- [ ] ×”×•×¡×¤×ª ×ª×•×¨ ×™×“× ×™×ª

### âš™ï¸ × ×™×”×•×œ ×¡×•×’×™ ×ª×•×¨×™× (Appointment Types)

**×ª×›×•× ×•×ª:**

- [ ] ×¨×©×™××ª ×¡×•×’×™ ×ª×•×¨×™×
  - grid/table ×¢× ×›×œ ×”×¡×•×’×™×
- [ ] ×”×•×¡×¤×ª ×¡×•×’ ×ª×•×¨ ×—×“×©
  - ×©× ×”×©×™×¨×•×ª
  - ×ª×™××•×¨
  - ××©×š ×–××Ÿ (×‘×“×§×•×ª)
  - ××—×™×¨ (××•×¤×¦×™×•× ×œ×™)
  - ×¦×‘×¢ (×œ×§×œ× ×“×¨)
- [ ] ×¢×¨×™×›×ª ×¡×•×’ ×ª×•×¨
- [ ] ××—×™×§×” (soft delete - ×”×©×‘×ª×”)
- [ ] ×”×¤×¢×œ×”/×”×©×‘×ª×” ××”×™×¨×”

### ğŸ‘¥ × ×™×”×•×œ ××©×ª××©×™× (Admin ×‘×œ×‘×“)

**×ª×›×•× ×•×ª:**

- [ ] ×˜×‘×œ×ª ××©×ª××©×™×
  - ×©×
  - ××™××™×™×œ
  - username
  - role
  - credits
  - ×¡×˜×˜×•×¡ (×¤×¢×™×œ/××•×©×¢×”)
  - ×ª××¨×™×š ×”×¦×˜×¨×¤×•×ª
- [ ] ×¤×¢×•×œ×•×ª
  - ×”×•×¡×¤×ª ××©×ª××© ×—×“×©
  - ×¢×¨×™×›×ª ××©×ª××©
  - ×”×©×¢×™×”/×‘×™×˜×•×œ ×”×©×¢×™×”
  - ×”×•×¡×¤×ª/×”×¡×¨×ª ×§×¨×“×™×˜×™×
  - ××—×™×§×”
- [ ] ×¤×™×œ×˜×¨×™×
  - ×œ×¤×™ role
  - ×œ×¤×™ ×¡×˜×˜×•×¡
  - ×—×™×¤×•×©

### ğŸ”” ××¢×¨×›×ª SMS (sms4free)

**×ª×›×•× ×•×ª:**

- [ ] ×©×œ×™×—×ª SMS ×œ××™×©×•×¨ ×ª×•×¨ ×œ×œ×§×•×—
- [ ] ×©×œ×™×—×ª SMS ×ª×–×›×•×¨×ª (24 ×©×¢×•×ª ×œ×¤× ×™)
- [ ] ×©×œ×™×—×ª SMS ×œ×‘×¢×œ ×”×¢×¡×§ ×¢×œ ×ª×•×¨ ×—×“×©
- [ ] × ×™×”×•×œ ×ª×‘× ×™×•×ª SMS
- [ ] ×”×™×¡×˜×•×¨×™×™×ª SMS ×©× ×©×œ×—×•
- [ ] × ×™×”×•×œ ×§×¨×“×™×˜×™× SMS

### ğŸ’³ ××¢×¨×›×ª ×§×¨×“×™×˜×™×

**×œ×•×’×™×§×”:**

- [ ] ×›×œ ×ª×•×¨ ×©× ×§×‘×¢ = -1 ×§×¨×“×™×˜
- [ ] ×›×©× ×’××¨×™× ×”×§×¨×“×™×˜×™× - ×—×¡×™××ª ×§×‘×™×¢×ª ×ª×•×¨×™× ×—×“×©×™×
- [ ] ××“××™×Ÿ ×™×›×•×œ ×œ×”×•×¡×™×£ ×§×¨×“×™×˜×™×
- [ ] ×”×ª×¨××” ×œ-business owner ×›×©× ×•×ª×¨×• 10 ×§×¨×“×™×˜×™×
- [ ] ×“×£ "×§× ×” ×§×¨×“×™×˜×™×" (××™× ×˜×’×¨×¦×™×” ×¢× ×ª×©×œ×•××™× ×‘×¢×ª×™×“)

### âš™ï¸ ×”×’×“×¨×•×ª ×¢×¡×§

**×ª×›×•× ×•×ª:**

- [ ] ×¤×¨×˜×™ ×¢×¡×§
  - ×©× ×”×¢×¡×§
  - ×ª×™××•×¨
  - ×›×ª×•×‘×ª
  - ×˜×œ×¤×•×Ÿ
  - ×œ×•×’×• (×”×¢×œ××ª ×ª××•× ×”)
- [ ] ×©×¢×•×ª ×¢×‘×•×“×”
  - ×™××™ ×¢×‘×•×“×” (checkboxes)
  - ×©×¢×ª ×”×ª×—×œ×”
  - ×©×¢×ª ×¡×™×•×
  - ×”×¤×¡×§×•×ª (××•×¤×¦×™×•× ×œ×™)
- [ ] ×”×’×“×¨×•×ª SMS
  - ×”×¤×¢×œ×”/×›×™×‘×•×™
  - ×©×¢×•×ª ×œ×¤× ×™ ×”×ª×–×›×•×¨×ª
  - ×ª×‘× ×™×ª ×”×•×“×¢×”
- [ ] ×”×’×“×¨×•×ª ×›×œ×œ×™×•×ª
  - ××•×¨×š ×‘×¨×™×¨×ª ××—×“×œ ×œ×ª×•×¨
  - ×–××Ÿ ××™× ×™××œ×™ ×‘×™×Ÿ ×ª×•×¨×™×
  - ×›××” ×–××Ÿ ××¨××© ××¤×©×¨ ×œ×§×‘×•×¢

---

## ğŸ—„ï¸ ××‘× ×” Database

### Users Collection

```javascript
{
  _id: ObjectId,
  name: String,
  email: String (unique),
  username: String (unique, lowercase),
  password: String (hashed),
  role: String (client/business_owner/admin),
  credits: Number (default: 0),
  isActive: Boolean (default: true),
  isSuspended: Boolean (default: false),
  businessName: String,
  businessDescription: String,
  businessAddress: String,
  businessLogo: String (URL),
  businessHours: {
    startHour: Number,
    endHour: Number,
    workingDays: [Number], // 0=Sunday, 6=Saturday
    breaks: [{start: String, end: String}]
  },
  phoneNumber: String,
  smsNotifications: {
    enabled: Boolean,
    reminderHoursBefore: Number,
    messageTemplate: String
  },
  settings: {
    defaultAppointmentDuration: Number,
    minTimeBetweenAppointments: Number,
    maxAdvanceBookingDays: Number
  },
  createdAt: Date,
  updatedAt: Date
}
```

### AppointmentTypes Collection

```javascript
{
  _id: ObjectId,
  userId: ObjectId (ref: Users),
  name: String,
  description: String,
  duration: Number (minutes),
  price: Number,
  color: String (hex color),
  isActive: Boolean,
  order: Number, // for sorting
  createdAt: Date
}
```

### Appointments Collection (Events)

```javascript
{
  _id: ObjectId,
  businessOwnerId: ObjectId (ref: Users),
  appointmentTypeId: ObjectId (ref: AppointmentTypes),
  customerName: String,
  customerEmail: String,
  customerPhone: String,
  customerId: ObjectId (ref: Users, optional),
  date: Date,
  startTime: String,
  endTime: String,
  duration: Number,
  status: String (pending/confirmed/cancelled/completed/no_show),
  notes: String,
  service: String,
  price: Number,
  smsSent: Boolean,
  smsReminderSent: Boolean,
  createdAt: Date,
  updatedAt: Date,
  cancelledAt: Date,
  cancelReason: String
}
```

### SMS History Collection

```javascript
{
  _id: ObjectId,
  userId: ObjectId (ref: Users),
  appointmentId: ObjectId (ref: Appointments),
  phoneNumber: String,
  message: String,
  type: String (confirmation/reminder/cancellation),
  status: String (sent/failed),
  sentAt: Date,
  provider: String (sms4free),
  cost: Number
}
```

### Credits History Collection

```javascript
{
  _id: ObjectId,
  userId: ObjectId (ref: Users),
  amount: Number (positive=added, negative=used),
  reason: String,
  description: String,
  relatedAppointment: ObjectId (ref: Appointments, optional),
  performedBy: ObjectId (ref: Users, for admin actions),
  createdAt: Date
}
```

---

## ğŸ¨ ×¢×™×¦×•×‘ UI/UX

### ×¦×‘×¢×™×

- Primary: `#667eea` (×¡×’×•×œ-×›×—×•×œ)
- Secondary: `#764ba2` (×¡×’×•×œ ×›×”×”)
- Success: `#10b981` (×™×¨×•×§)
- Warning: `#f59e0b` (×›×ª×•×)
- Danger: `#ef4444` (××“×•×)
- Info: `#3b82f6` (×›×—×•×œ)

### ×§×•××¤×•× × ×˜×™×

- ×›×œ ×”×§×•××¤×•× × ×˜×™× ×¢× Tailwind CSS
- RTL support ××œ×
- Responsive (mobile-first)
- ×× ×™××¦×™×•×ª ×—×œ×§×•×ª
- Loading states
- Error handling

---

## ğŸ” Authentication & Authorization

### Routes Protection

```
Public Routes:
- /login
- /register
- /:username (public booking)

Private Routes (requires login):
- /dashboard
- /events
- /appointment-types
- /settings

Admin Only:
- /users
- /system-settings
- /credits-management
```

### Role-based Access

- Middleware ×‘×¦×“ ×©×¨×ª ×œ×‘×“×™×§×ª role
- Frontend ×’× ×‘×•×“×§ ×•××¡×ª×™×¨/××¦×™×’ ×ª×›×•× ×•×ª

---

## ğŸ“¡ API Endpoints

### Users

- `POST /api/users/register` - ×”×¨×©××”
- `POST /api/users/login` - ×”×ª×—×‘×¨×•×ª
- `GET /api/users` - ×¨×©×™××ª ××©×ª××©×™× (admin)
- `GET /api/users/:id` - ×¤×¨×˜×™ ××©×ª××©
- `PUT /api/users/:id` - ×¢×“×›×•×Ÿ ××©×ª××©
- `DELETE /api/users/:id` - ××—×™×§×ª ××©×ª××© (admin)
- `POST /api/users/:id/suspend` - ×”×©×¢×™×” (admin)
- `POST /api/users/:id/credits` - ×”×•×¡×¤×ª/×”×¡×¨×ª ×§×¨×“×™×˜×™× (admin)
- `GET /api/users/public/:username` - ×¤×¨×˜×™ ×¢×¡×§ ×¦×™×‘×•×¨×™×™×

### Appointment Types

- `GET /api/appointment-types` - ×¡×•×’×™ ×ª×•×¨×™× ×©×œ ×”××©×ª××©
- `GET /api/appointment-types/user/:username` - ×¡×•×’×™ ×ª×•×¨×™× ×¦×™×‘×•×¨×™×™×
- `POST /api/appointment-types` - ×™×¦×™×¨×ª ×¡×•×’ ×ª×•×¨
- `PUT /api/appointment-types/:id` - ×¢×“×›×•×Ÿ
- `DELETE /api/appointment-types/:id` - ××—×™×§×”

### Appointments

- `GET /api/appointments` - ×ª×•×¨×™× ×©×œ ×”××©×ª××©
- `GET /api/appointments/:id` - ×¤×¨×˜×™ ×ª×•×¨
- `POST /api/appointments` - ×§×‘×™×¢×ª ×ª×•×¨ ×—×“×©
- `PUT /api/appointments/:id` - ×¢×“×›×•×Ÿ ×ª×•×¨
- `DELETE /api/appointments/:id` - ×‘×™×˜×•×œ ×ª×•×¨
- `GET /api/appointments/available-times` - ×©×¢×•×ª ×¤× ×•×™×•×ª
- `POST /api/appointments/:id/send-reminder` - ×©×œ×™×—×ª SMS ×ª×–×›×•×¨×ª

### SMS

- `POST /api/sms/send` - ×©×œ×™×—×ª SMS
- `GET /api/sms/history` - ×”×™×¡×˜×•×¨×™×™×ª SMS
- `GET /api/sms/balance` - ×™×ª×¨×ª SMS

### Credits

- `GET /api/credits/history` - ×”×™×¡×˜×•×¨×™×™×ª ×§×¨×“×™×˜×™×
- `POST /api/credits/add` - ×”×•×¡×¤×ª ×§×¨×“×™×˜×™× (admin)

---

## ğŸš€ ×¡×“×¨ ×™×™×©×•× ××•××œ×¥

### Phase 1 - Core (× ×¢×©×” ×—×œ×§×™×ª) âœ…

- [x] Setup project
- [x] User authentication
- [x] Database models
- [x] Basic routing
- [ ] Convert all to Tailwind

### Phase 2 - Business Owner Features

- [ ] × ×™×”×•×œ ×¡×•×’×™ ×ª×•×¨×™× (CRUD)
- [ ] ×™×•××Ÿ ×ª×•×¨×™× (Calendar view)
- [ ] ×”×’×“×¨×•×ª ×¢×¡×§
- [ ] Dashboard ×¢× ×¡×˜×˜×™×¡×˜×™×§×•×ª

### Phase 3 - Public Booking

- [ ] ×“×£ ×¦×™×‘×•×¨×™ /:username ××œ× ×•××¢×•×¦×‘
- [ ] ×—×™×©×•×‘ ×©×¢×•×ª ×¤× ×•×™×•×ª
- [ ] ×§×‘×™×¢×ª ×ª×•×¨ ×¢× ×•×œ×™×“×¦×™×•×ª
- [ ] ××™×©×•×¨ ×•×ª×¦×•×’×ª ×”×¦×œ×—×”

### Phase 4 - Admin Features

- [ ] × ×™×”×•×œ ××©×ª××©×™× ××œ×
- [ ] × ×™×”×•×œ ×§×¨×“×™×˜×™×
- [ ] Dashboard ××“××™×Ÿ

### Phase 5 - SMS Integration

- [ ] ××™× ×˜×’×¨×¦×™×” ×¢× sms4free
- [ ] ×©×œ×™×—×ª ××™×©×•×¨×™×
- [ ] ×©×œ×™×—×ª ×ª×–×›×•×¨×•×ª
- [ ] × ×™×”×•×œ ×ª×‘× ×™×•×ª

### Phase 6 - Advanced Features

- [ ] ×¡×˜×˜×™×¡×˜×™×§×•×ª ××ª×§×“××•×ª
- [ ] Export data (Excel/CSV)
- [ ] Email notifications
- [ ] Payment integration

---

## ğŸ“ ×”×¢×¨×•×ª ×˜×›× ×™×•×ª

### Performance

- Caching ×©×œ ×©×¢×•×ª ×¤× ×•×™×•×ª
- Debounce ×‘×—×™×¤×•×©
- Lazy loading ×©×œ ×§×•××¤×•× × ×˜×™×
- Pagination ×‘×¨×©×™××•×ª

### Security

- Rate limiting ×¢×œ API
- Input validation (client + server)
- SQL Injection prevention
- XSS prevention
- CSRF tokens

### Testing

- Unit tests ×œ×¤×•× ×§×¦×™×•×ª ×§×¨×™×˜×™×•×ª
- Integration tests ×œ-API
- E2E tests ×œ××¡×œ×•×œ×™× ××¨×›×–×™×™×

---

**×”×× ×”×ª×›× ×•×Ÿ × ×¨××” ×˜×•×‘? ×™×© ××©×”×• ×œ×”×•×¡×™×£ ××• ×œ×©× ×•×ª?**
